### PRD: COZY 카페 주문 화면

#### 1. 개요
본 문서는 COZY 카페 애플리케이션의 고객 주문 화면에 대한 제품 요구사항을 정의합니다. 사용자는 이 화면을 통해 메뉴를 탐색하고, 원하는 옵션을 선택하여 장바구니에 추가한 뒤, 최종적으로 주문을 완료할 수 있습니다.

#### 2. 목표
- 고객이 쉽고 직관적으로 주문할 수 있는 사용자 인터페이스를 제공합니다.
- 각 메뉴의 설명, 가격, 사용자 정의 옵션을 명확하게 표시합니다.
- 사용자가 주문 확정 전에 선택한 항목과 총 결제 금액을 쉽게 검토할 수 있도록 합니다.
- 주문 프로세스를 간소화하여 사용자 경험을 향상시킵니다.

#### 3. 사용자 스토리
- **As a User, I want to** 전체 메뉴 목록을 보고 어떤 것을 주문할지 결정하고 싶다.
- **As a User, I want to** 각 메뉴의 가격과 간단한 설명을 확인하고 싶다.
- **As a User, I want to** 샷 추가나 시럽 같은 옵션을 선택하여 음료를 맞춤 설정하고 싶다.
- **As a User, I want to** 여러 개의 메뉴를 장바구니에 담고 싶다.
- **As a User, I want to** 장바구니에서 내가 선택한 메뉴, 수량, 개별 가격을 확인하고 싶다.
- **As a User, I want to** 결제 전에 주문할 총금액을 확인하고 싶다.
- **As a User, I want to** 장바구니에 담은 메뉴들을 최종적으로 주문하고 싶다.

#### 4. 기능 요구사항

**4.1. 헤더**
- 화면 상단에는 애플리케이션 로고('COZY')가 표시됩니다.
- '주문하기'와 '관리자' 탭이 제공되며, 현재 활성화된 탭은 시각적으로 구분되어야 합니다.
- '주문하기' 탭: 고객 주문 화면으로 이동합니다.
- '관리자' 탭: 관리자 화면으로 이동합니다.

**4.2. 메뉴 목록**
- 주문 가능한 전체 메뉴가 목록 형태로 표시됩니다.
- 각 메뉴는 개별 카드 형태로 구성되며, 다음 정보를 포함해야 합니다.
  - 메뉴 이미지
  - 메뉴 이름 (예: 아메리카노(ICE))
  - 기본 가격
  - 간단한 설명
  - 선택 가능한 옵션과 추가 비용 (예: 샷 추가 (+500원))
  - '담기' 버튼

**4.3. 메뉴 맞춤 설정**
- 사용자는 체크박스를 통해 메뉴의 옵션을 선택할 수 있습니다.
- 옵션 선택 시 메뉴의 가격이 실시간으로 반영되어야 합니다.

**4.4. 장바구니**
- 메뉴 카드에서 '담기' 버튼을 클릭하면 해당 메뉴와 선택된 옵션이 장바구니에 추가됩니다.
- 동일한 구성(메뉴+옵션)의 항목이 다시 추가될 경우, 장바구니 내 해당 항목의 수량이 1 증가해야 합니다.
- 장바구니에는 다음 정보가 표시되어야 합니다.
  - 추가된 모든 메뉴 항목
  - 각 항목의 이름, 선택 옵션, 수량 및 소계(항목 가격 * 수량)
  - 장바구니에 담긴 모든 항목의 총결제 금액
  - '주문하기' 버튼
- **(추가 제안)** 장바구니 내에서 항목을 삭제하거나 수량을 직접 조절(+, -)하는 기능이 필요합니다.

**4.5. 주문 실행**
- 장바구니의 '주문하기' 버튼을 클릭하면 주문이 최종 확정됩니다.
- 주문 완료 후 장바구니는 비워지고, 사용자에게 주문 완료를 알리는 확인 메시지나 화면이 표시되어야 합니다.

#### 5. 제외 범위
- 본 문서에서는 다음 내용을 다루지 않습니다.
  - 관리자 화면의 상세 기능
  - 결제 프로세스 연동
  - 사용자 로그인 및 회원가입
  - 주문 완료 후 주문 상태 추적 화면
  - 와이어프레임에 명시되지 않은 장바구니 내 항목 편집/삭제 기능의 상세 UI
---

### PRD: COZY 카페 관리자 화면

#### 1. 개요
본 문서는 COZY 카페 애플리케이션의 관리자 화면에 대한 제품 요구사항을 정의합니다. 관리자(직원)는 이 화면을 통해 실시간 주문 현황을 파악하고, 각 주문의 상태를 관리하며, 메뉴별 재고를 조절할 수 있습니다.

#### 2. 목표
- 실시간으로 들어오는 주문을 명확하게 인지하고 관리할 수 있는 환경을 제공합니다.
- 주문 처리 상태(접수, 제조 중, 제조 완료)를 직관적으로 변경하고 추적할 수 있도록 합니다.
- 메뉴별 재고 현황을 쉽게 파악하고 관리할 수 있도록 지원합니다.
- 효율적인 주문 처리 및 재고 관리를 통해 매장 운영을 최적화합니다.

#### 3. 사용자 스토리 (관리자 관점)
- **As an Admin, I want to** 전체 주문 요약(총 주문, 주문 접수, 제조 중, 제조 완료)을 한눈에 보고 현재 매장 상황을 빠르게 파악하고 싶다.
- **As an Admin, I want to** 새로 들어온 주문을 실시간으로 확인하고 접수 처리를 하고 싶다.
- **As an Admin, I want to** 주문의 처리 상태를 '주문 접수'에서 '제조 중'으로, '제조 중'에서 '제조 완료'로 변경하여 진행 상황을 추적하고 싶다.
- **As an Admin, I want to** 각 메뉴의 현재 재고 수량을 확인하고, 필요에 따라 수량을 직접 추가하거나 차감하고 싶다.

#### 4. 기능 요구사항

**4.1. 관리자 대시보드**
- 화면 상단에 주문 상태 요약 정보를 제공합니다.
- 표시 항목:
  - **총 주문:** 현재 처리 중인 전체 주문의 수
  - **주문 접수:** '접수' 상태인 주문의 수
  - **제조 중:** '제조 중' 상태인 주문의 수
  - **제조 완료:** '제조 완료' 상태인 주문의 수
- 이 수치들은 '주문 현황' 목록의 상태가 변경될 때마다 실시간으로 업데이트되어야 합니다.

**4.2. 재고 현황**
- 관리해야 할 주요 메뉴들의 재고 상태를 표시합니다.
- 각 항목은 다음 정보를 포함합니다.
  - 메뉴 이름
  - 현재 재고 수량
  - 수량 조절 버튼 (`+`, `-`)
- `+` 버튼 클릭 시 해당 메뉴의 재고가 1 증가합니다.
- `-` 버튼 클릭 시 해당 메뉴의 재고가 1 감소합니다. (단, 0 미만으로 내려가지 않아야 합니다.)

**4.3. 주문 현황**
- 고객이 주문한 내역이 실시간으로 리스트에 추가됩니다.
- 아직 '제조 완료'되지 않은 모든 주문을 시간순으로 표시합니다.
- 각 주문 항목은 다음 정보를 포함합니다.
  - 주문 시각 (예: 7월 31일 13:00)
  - 주문 메뉴 상세 (메뉴명, 옵션, 수량)
  - 주문 총액
  - 주문 상태 변경 버튼
- **주문 상태 변경:**
  - 주문의 현재 상태가 버튼에 표시됩니다 (예: '주문 접수').
  - 버튼을 클릭하면 주문 상태가 다음 단계로 변경됩니다. (흐름: `주문 접수` -> `제조 중` -> `제조 완료`)
  - '제조 완료' 상태가 된 주문은 이 목록에서 사라지거나, 별도의 완료 탭으로 이동해야 합니다. (와이어프레임 기준으로는 목록에서 사라지는 것으로 해석됨)
  - 상태가 변경되면 '관리자 대시보드'의 요약 수치가 함께 업데이트되어야 합니다.

#### 5. 제외 범위
- 본 문서에서는 다음 내용을 다루지 않습니다.
  - 특정 기간별 매출 통계 및 분석 기능
  - 메뉴 추가/편집/삭제 기능
  - 재고 부족 시 자동 알림 기능
---

### PRD: COZY 카페 백엔드

#### 1. 데이터 모델

- **Menus**
  - `id`: (Primary Key)
  - `name`: String (커피 이름)
  - `description`: String (설명)
  - `price`: Number (가격)
  - `image_url`: String (이미지)
  - `stock`: Number (재고 수량)
- **Options**
  - `id`: (Primary Key)
  - `name`: String (옵션 이름, 예: 샷 추가)
  - `price`: Number (옵션 가격)
  - `menu_id`: (Foreign Key, Menus.id) (연결할 메뉴)
- **Orders**
  - `id`: (Primary Key)
  - `order_timestamp`: DateTime (주문 일시)
  - `items`: JSON (주문 내용 배열)
    - `menu_id`: (Foreign Key, Menus.id)
    - `quantity`: Number (수량)
    - `options`: Array of option_id (옵션)
    - `total_price`: Number (금액)
  - `status`: Enum('주문 접수', '제조 중', '완료') (주문 상태)

#### 2. 데이터 스키마를 위한 사용자 흐름

1.  **메뉴 목록 표시**:
    - 클라이언트(브라우저)가 메뉴 목록을 요청합니다.
    - 서버는 `Menus` 테이블에서 모든 메뉴 정보를 조회합니다.
    - 일반 사용자에게는 `stock`을 제외한 정보를, 관리자에게는 `stock`을 포함한 모든 정보를 반환합니다.
2.  **장바구니 담기 및 주문**:
    - 사용자가 앱 화면에서 메뉴와 옵션을 선택하여 장바구니에 담습니다. 이 과정은 클라이언트 측에서 처리됩니다.
    - 사용자가 '주문하기' 버튼을 클릭하면, 클라이언트는 장바구니에 담긴 전체 주문 내용을 서버에 전송합니다.
3.  **주문 정보 저장**:
    - 서버는 수신된 주문 정보를 바탕으로 `Orders` 테이블에 새로운 레코드를 생성합니다.
    - `order_timestamp`는 현재 시간으로 기록됩니다.
    - `items` 필드에는 주문된 각 메뉴, 수량, 선택된 옵션, 개별 금액이 포함된 JSON 배열을 저장합니다.
    - 주문의 기본 `status`는 '주문 접수'로 설정됩니다.
4.  **재고 업데이트**:
    - 주문이 저장되면, 서버는 주문된 각 메뉴의 `stock` 수량을 `Menus` 테이블에서 차감합니다.
5.  **주문 현황 표시 및 관리**:
    - 관리자 화면에서 '주문 현황' 목록을 요청합니다.
    - 서버는 `Orders` 테이블에서 `status`가 '완료'가 아닌 모든 주문을 조회하여 반환합니다.
    - 관리자가 특정 주문의 상태를 변경하면(예: '주문 접수' 클릭), 서버는 해당 주문의 `status`를 '제조 중' 또는 '완료'로 업데이트합니다.

#### 3. API 설계

- **GET /api/menus**
  - **설명**: 고객 화면에 표시할 메뉴 목록을 조회합니다.
  - **응답**: `200 OK`
    ```json
    [
      {
        "id": 1,
        "name": "아메리카노(ICE)",
        "description": "시원하고 깔끔한 맛의 아메리카노",
        "price": 4000,
        "image_url": "/images/americano-ice.jpg",
        "options": [
          { "id": 101, "name": "샷 추가", "price": 500 },
          { "id": 102, "name": "시럽 추가", "price": 300 }
        ]
      },
      ...
    ]
    ```

- **GET /api/admin/menus**
  - **설명**: 관리자 화면에 표시할 메뉴 목록을 재고와 함께 조회합니다.
  - **응답**: `200 OK`
    ```json
    [
      {
        "id": 1,
        "name": "아메리카노(ICE)",
        "stock": 100
      },
      ...
    ]
    ```

- **POST /api/orders**
  - **설명**: 새로운 주문을 생성합니다.
  - **요청 본문**:
    ```json
    {
      "items": [
        {
          "menu_id": 1,
          "quantity": 2,
          "options": [101],
          "total_price": 9000
        }
      ]
    }
    ```
  - **동작**:
    1.  `Orders` 테이블에 주문 정보를 저장합니다.
    2.  주문된 `items`에 따라 `Menus` 테이블의 `stock`을 업데이트합니다.
  - **응답**: `201 Created`
    ```json
    {
      "order_id": 123,
      "message": "주문이 성공적으로 접수되었습니다."
    }
    ```

- **GET /api/orders/:order_id**
  - **설명**: 특정 주문의 상세 정보를 조회합니다.
  - **응답**: `200 OK`
    ```json
    {
      "id": 123,
      "order_timestamp": "2023-12-16T14:30:00Z",
      "status": "주문 접수",
      "items": [...]
    }
    ```

- **PATCH /api/orders/:order_id/status**
    - **설명**: 주문의 상태를 변경합니다.
    - **요청 본문**:
        ```json
        {
          "status": "제조 중"
        }
        ```
    - **응답**: `200 OK`
        ```json
        {
            "order_id": 123,
            "new_status": "제조 중"
        }
        ```